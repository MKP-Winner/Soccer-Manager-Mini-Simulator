<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>‚öΩ Soccer Manager Mini-Sim</title>
<style>
/* ===============================
   ‚öôÔ∏è GENERAL STYLES - Not AI Generated
=============================== */
body {
  font-family: "Poppins", sans-serif;
  background: linear-gradient(180deg, #0077b6 0%, #90e0ef 100%);
  color: #fff;
  text-align: center;
  margin: 0;
  padding: 2rem;
}

h1 {
  font-size: 2rem;
  margin-bottom: 1rem;
}

select, button {
  font-size: 1rem;
  padding: 0.6rem 1rem;
  margin: 0.5rem;
  border: none;
  border-radius: 8px;
  outline: none;
}

select { background: #fff; color: #333; }
button { background: #023e8a; color: #fff; cursor: pointer; transition: background 0.3s ease; }
button:hover { background: #03045e; }

#commentary {
  background: rgba(255, 255, 255, 0.9);
  color: #333;
  padding: 1rem;
  border-radius: 10px;
  margin-top: 1.5rem;
  min-height: 80px;
  white-space: pre-line;
  font-weight: 500;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

#scoreboard {
  margin-top: 1rem;
  background: rgba(0,0,0,0.3);
  padding: 0.5rem;
  border-radius: 8px;
}
#scoreboard span { font-weight: bold; color: #ffd60a; }

#alert-box {
  background: rgba(255, 87, 51, 0.95);
  color: #fff;
  margin-top: 1rem;
  padding: 1rem;
  border-radius: 8px;
  display: none;
  position: relative;
  animation: fadeIn 0.4s ease-in;
}
#countdownBar { height: 10px; background: #ffcc00; margin-top: 0.5rem; border-radius: 5px; width: 100%; transition: width 1s linear; }

#explosion-message { margin-top: 1rem; display: none; font-size: 1.2rem; animation: shake 0.3s ease-in-out infinite alternate; }
.explosion { animation: explode 1s ease-out; color: #ffcc00; font-weight: bold; }
.hidden { display: none !important; }
#playAgain { margin-top: 1rem; background: #06d6a0; color: #000; }

/* Mini stadium - Not AI Generated*/
#stadium {
  margin: 1rem auto;
  width: 100%;
  max-width: 600px;
  height: 120px;
  position: relative;
  overflow: hidden;
  display: none;
  background: #2e8b57; 
  border-radius: 10px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.crowd { /* AI Generated */
  width: 10px;
  height: 10px;
  background: yellow;
  border-radius: 50%;
  position: absolute;
  bottom: 0;
  animation: cheer 1s infinite alternate;
}

@keyframes cheer { /* AI Generated */
  from { transform: scale(1) translateY(0); background: yellow; }
  to { transform: scale(1.5) translateY(-15px); background: orange; }
}

/* Help modal - AI generated */
#help-btn { position: fixed; top: 20px; right: 20px; font-size: 1.5rem; padding: 0.3rem 0.7rem; border-radius: 50%; background: #ffcc00; color: #000; border: none; cursor: pointer; z-index: 1000; }
#help-modal {
  display: none;
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0,0,0,0.9);
  color: #fff;
  padding: 2rem;
  border-radius: 10px;
  width: 90%; max-width: 400px;
  z-index: 1001;
}
#help-modal button { margin-top: 1rem; background: #06d6a0; color: #000; }

/* Animations - AI Generated */
@keyframes fadeIn { from { opacity: 0; transform: translateY(-10px);} to { opacity: 1; transform: translateY(0);} }
@keyframes shake { from { transform: translateX(-2px);} to { transform: translateX(2px);} }
@keyframes explode {0%{transform:scale(1);opacity:1;}50%{transform:scale(1.5);opacity:0.8;color:red;}100%{transform:scale(2);opacity:0;}}
</style>
</head>
<body>

<h1>‚öΩ Soccer Manager Mini-Sim</h1> <!-- Not AI generated -->

<div>
  <label for="teamA">Team A:</label>
  <select id="teamA"></select>
  <label for="teamB">Team B:</label>
  <select id="teamB"></select>
  <button id="playMatch">Play Match</button>
</div>

<div id="commentary">Select two teams and click "Play Match" to begin!</div>
<div id="stadium"></div>

<div id="alert-box">
  ‚ö†Ô∏è Time Bomb! Substitution countdown: <span id="countdown">10</span> seconds
  <div id="countdownBar"></div>
  <br>
  <button id="substitute-btn">Substitute Player</button>
</div>

<div id="explosion-message"></div>

<div id="scoreboard">
  Wins: <span id="wins">0</span> |
  Losses: <span id="losses">0</span> |
  Draws: <span id="draws">0</span>
</div>

<div> <!--AI Generated-->
    <label for="songSelect">Background Track:</label>
    <select id="songSelect"></select>
</div>
<button id="toggleMusic">üéß Toggle Background Music</button> 
<button id="playAgain" class="hidden">Play Again</button>
<button id="help-btn">?</button>

<div id="help-modal"> <!--Not AI Generated-->
  <h3>üõà Help & Instructions</h3>
  <p>
    Click the "Close" button below, or the '?' again, to return to the game.
  </p>
  <button id="close-help">Close</button>
</div>

<audio id="anthem-player" src="Heat Waves.mp3" loop autoplay muted></audio> <!--Not AI Generated-->

<script>
// ===================================
// ‚öΩ Soccer Manager Mini-Sim Script - AI Generated
// ===================================

// ====== TEAM RATINGS ======
const teams = {
  "Manchester United": 88, "Liverpool": 90, "Manchester City": 92, "Chelsea": 87,
  "Arsenal": 86, "Tottenham Hotspur": 85, "Leicester City": 83, "West Ham United": 82,
  "Everton": 80, "Newcastle United": 84, "Real Madrid": 91, "Barcelona": 90,
  "Atletico Madrid": 88, "Sevilla": 85, "Valencia": 82, "Real Sociedad": 83,
  "Villarreal": 81, "Athletic Bilbao": 80, "Betis": 79, "Celta Vigo": 78,
  "Juventus": 89, "AC Milan": 88, "Inter Milan": 90, "Napoli": 87, "Roma": 85,
  "Lazio": 84, "Atalanta": 83, "Fiorentina": 81, "Torino": 80, "Sassuolo": 78,
  "Bayern Munich": 92, "Borussia Dortmund": 88, "RB Leipzig": 85, "Bayer Leverkusen": 84,
  "VfL Wolfsburg": 82, "Eintracht Frankfurt": 81, "Borussia Monchengladbach": 80,
  "FC Cologne": 78, "Freiburg": 77, "Union Berlin": 79, "Paris Saint-Germain": 92,
  "Marseille": 85, "Monaco": 84, "Lyon": 83, "Rennes": 81, "Lille": 82,
  "Nice": 79, "Lens": 78, "Strasbourg": 77, "Montpellier": 76
};

// üéß AUDIO CONFIG: Song list - AI Generated
const anthems = {
    "Heat Waves": "Heat Waves.mp3", 
    "The Nights": "The Nights.mp3",
    "Rodeo": "Rodeo.mp3",
    "Richer": "Richer.mp3",
    "Killa": "Killa.mp3",
    "Mbappe": "Mbappe.mp3",
    "No Music": null 
};

// AI Generated
const helpVideoURL = "CTI-110 Project Help Video.mp4"; 


// ====== HTML REFERENCES ====== - AI Generated
const teamASelect=document.getElementById("teamA");
const teamBSelect=document.getElementById("teamB");
const playBtn=document.getElementById("playMatch");
const commentary=document.getElementById("commentary");
const stadium=document.getElementById("stadium");
const alertBox=document.getElementById("alert-box");
const countdownEl=document.getElementById("countdown");
const countdownBar=document.getElementById("countdownBar");
const substituteBtn=document.getElementById("substitute-btn");
const explosionMsg=document.getElementById("explosion-message");
const playAgainBtn=document.getElementById("playAgain");
const wins=document.getElementById("wins");
const losses=document.getElementById("losses");
const draws=document.getElementById("draws");
const helpBtn=document.getElementById("help-btn");
const helpModal=document.getElementById("help-modal");
const closeHelp=document.getElementById("close-help");
const anthemPlayer=document.getElementById("anthem-player");
const toggleMusicBtn = document.getElementById("toggleMusic"); 
const songSelect = document.getElementById("songSelect");

let winCount=0, lossCount=0, drawCount=0, countdownTimer;
let isMusicPlaying = false; 

// üéß AUDIO SETUP FUNCTION - AI Generated
function setupAudioPlayer(trackName) {
    if (isMusicPlaying) {
        anthemPlayer.pause();
        isMusicPlaying = false;
        toggleMusicBtn.textContent = "‚ñ∂Ô∏è Start Background Music";
    }

    const trackPath = anthems[trackName];

    if (trackPath) {
        anthemPlayer.src = trackPath;
        anthemPlayer.loop = true;
        anthemPlayer.volume = 0.3;
        anthemPlayer.muted = false; 
        anthemPlayer.load(); 
        toggleMusicBtn.disabled = false;
        toggleMusicBtn.textContent = "‚ñ∂Ô∏è Start Background Music";
    } else {
        anthemPlayer.removeAttribute('src');
        anthemPlayer.load();
        toggleMusicBtn.disabled = true;
        toggleMusicBtn.textContent = "No Track Selected";
    }
}

// ====== POPULATE SONGS AND TEAMS ====== - AI Generated
function populateSongs() {
    Object.keys(anthems).forEach(trackName => {
        let option = document.createElement("option");
        option.value = trackName;
        option.textContent = trackName;
        songSelect.appendChild(option);
    });
    songSelect.selectedIndex = 0;
    setupAudioPlayer(songSelect.value);
}

// Populate teams - AI Generated
Object.keys(teams).forEach(team=>{
  let optA=document.createElement("option"); optA.value=team; optA.textContent=team; teamASelect.appendChild(optA);
  let optB=document.createElement("option"); optB.value=team; optB.textContent=team; teamBSelect.appendChild(optB);
});
teamASelect.selectedIndex=0; teamBSelect.selectedIndex=1;

// Call populate songs function - AI Generated
populateSongs();

// üéß SONG SELECT CHANGE LISTENER - AI Generated
songSelect.addEventListener("change", () => {
    setupAudioPlayer(songSelect.value);
});


// ====== MUSIC TOGGLE FUNCTION ====== - AI Generated
function toggleBackgroundMusic() {
    if (anthemPlayer.getAttribute('src') === null) {
        toggleMusicBtn.textContent = "Please select a song first!";
        return;
    }

    if (isMusicPlaying) {
        anthemPlayer.pause();
        toggleMusicBtn.textContent = "‚ñ∂Ô∏è Start Background Music";
        isMusicPlaying = false;
    } else {
        anthemPlayer.muted = false;
        anthemPlayer.volume = 0.3;
        
        anthemPlayer.play().then(() => {
            toggleMusicBtn.textContent = "‚è∏Ô∏è Pause Background Music";
            isMusicPlaying = true;
        }).catch(err => {
            console.error("Audio playback failed. Error:", err);
            toggleMusicBtn.textContent = "‚ùå Audio Error (Check console/file)";
            isMusicPlaying = false;
        });
    }
}

// üéß MUSIC TOGGLE EVENT LISTENER - AI Generated
if (toggleMusicBtn) {
    toggleMusicBtn.addEventListener("click", toggleBackgroundMusic);
}

// ====== HELP BUTTON CHANGE: OPENS VIDEO IN NEW TAB ====== - AI Generated
helpBtn.addEventListener("click",()=>{
    window.open(helpVideoURL, '_blank');
});

// AI Generated
closeHelp.addEventListener("click",()=>helpModal.style.display="none");

// ====== STADIUM ANIMATION (Unchanged) ====== - AI Generated
function createCrowdAnimation(){
  for(let i=0;i<40;i++){
    let fan=document.createElement("div");
    fan.classList.add("crowd");
    fan.style.left=(Math.random()*100)+"%";
    fan.style.animationDelay=(Math.random()*0.5)+"s";
    stadium.appendChild(fan);
  }
}

// ====== PLAY MATCH (Music ducking logic) ====== - Not AI Generated
playBtn.addEventListener("click",()=>{
  const teamA=teamASelect.value, teamB=teamBSelect.value;
  if(teamA===teamB){ commentary.textContent="‚ö†Ô∏è Choose two different teams!"; return; }
  playBtn.disabled=true;
  stadium.style.display="block"; stadium.innerHTML=""; createCrowdAnimation();
  commentary.textContent="üèüÔ∏è Match Kickoff!";
  
  // üéß Dim music slightly when the match starts - Not AI Generated
  if (isMusicPlaying) anthemPlayer.volume = 0.2; 
  
  simulateMatch(teamA,teamB);
});


// Match simulation (Unchanged - uses original setTimeout) - AI Generated
function simulateMatch(teamA,teamB){
  const aScore=Math.floor(Math.random()*3);
  const bScore=Math.floor(Math.random()*3);
  setTimeout(()=>commentary.textContent=`${teamA} attacks...`,1000);
  setTimeout(()=>commentary.textContent=`${teamB} defends...`,2500);
  setTimeout(()=>commentary.textContent=`üî• ${teamA} shoots!`,4000);
  setTimeout(()=>commentary.textContent=`‚öΩ ${teamB} counters!`,5500);
  setTimeout(()=>startTimeBomb(teamA),3000); 
  setTimeout(()=>endMatch(teamA,teamB,aScore,bScore),8000); 
}

// End match (Restores music volume) - AI Generated
function endMatch(teamA,teamB,aScore,bScore){
  let result, winner=null;
  if(aScore>bScore){ result=`${teamA} Wins! üèÜ`; winCount++; wins.textContent=winCount; winner=teamA;}
  else if(bScore>aScore){ result=`${teamB} Wins! ‚ùå`; lossCount++; losses.textContent=lossCount; winner=teamB;}
  else{ result=`Draw ü§ù`; drawCount++; draws.textContent=drawCount;}
  commentary.textContent=`üèÅ Final Score: ${teamA} ${aScore} - ${bScore} ${teamB}\n${result}`;
  playBtn.disabled=false; playAgainBtn.classList.remove("hidden");
  
  // üéß Restore music volume - Not AI Generated
  if (isMusicPlaying) anthemPlayer.volume = 0.3;
}

// Time Bomb (Volume Ducking) - Not AI Generated
function startTimeBomb(teamA){
  alertBox.style.display="block"; 
  let time=5; countdownEl.textContent=time; 
  countdownBar.style.width="100%"; countdownBar.style.background="#ffcc00";
  
  // üéß Lower volume for alert - Not AI Generated
  if (isMusicPlaying) anthemPlayer.volume = 0.1;
  
  countdownTimer=setInterval(()=>{
    time--; countdownEl.textContent=time; countdownBar.style.width=(time*20)+"%"; 
    if(time<=3) countdownBar.style.background="#ff5733";
    if(time<=0){ 
        clearInterval(countdownTimer); 
        playerExplodes(teamA);
        if (isMusicPlaying) anthemPlayer.volume = 0.3; 
    }
  }, 1000);
  
  substituteBtn.onclick=()=>{
    clearInterval(countdownTimer); 
    alertBox.style.display="none"; 
    commentary.textContent=`‚úÖ ${teamA} substituted player safely.`; 
    teams[teamA]-=2;
    if (isMusicPlaying) anthemPlayer.volume = 0.3; 
  };
}

// Explosion effect (Unchanged) - AI Generated
function playerExplodes(teamA){
  alertBox.style.display="none";
  explosionMsg.textContent=`üí• ${teamA}'s best player exploded! Team rating -5`;
  explosionMsg.style.display="block"; explosionMsg.classList.add("explosion");
  teams[teamA]-=5;
  setTimeout(()=>explosionMsg.style.display="none",1500);
  commentary.textContent=`üò± ${teamA} lost a key player!`;
}

// Reset (Unchanged) - AI Generated
playAgainBtn.addEventListener("click",()=>{ 
    commentary.textContent="Select two teams and click Play Match again!"; 
    playAgainBtn.classList.add("hidden"); 
    stadium.style.display="none"; 
});
</script>
</body>
</html>